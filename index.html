<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sri Lanka Grid Converter — Tactical Tool</title>
<meta name="description" content="Convert Lat/Lon to Kandawala (EPSG:5235), SLD99 (EPSG:5234) and UTM 44N with military grid (4/6/8-figure) and reverse GR → Lat/Lon."/>

<script src="https://cdn.jsdelivr.net/npm/proj4@2.11.0/dist/proj4.min.js"></script>

<style>
:root{
--bg1:#05060a; --bg2:#071028; --card:#081426; --glass:rgba(255,255,255,0.03);
--accent:#6bd6ff; --accent-2:#7b6bff; --muted:#9fb0c8; --success:#5ee0a8;
--radius:12px; --mono:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', monospace;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color: #e9f3ff;background: radial-gradient(1200px 600px at 10% 10%, rgba(83,126,255,0.06), transparent), linear-gradient(180deg,var(--bg1),var(--bg2));}
.app{max-width:1000px;margin:28px auto;padding:20px}

.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);border-radius:16px;padding:18px;box-shadow: 0 8px 30px rgba(3,10,20,0.6);} 
header{display:flex;gap:14px;align-items:center;margin-bottom:12px}
.logo{width:54px;height:54px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#021028;font-weight:800;box-shadow:0 6px 18px rgba(107,214,255,0.08) inset}
h1{font-size:18px;margin:0}
p.lead{margin:6px 0 0;color:var(--muted);font-size:13px}

.grid{display:grid;gap:12px}
.row{display:flex;gap:12px;align-items:center}
.cols-2{grid-template-columns:1fr 380px}
.cols-3{grid-template-columns:repeat(3,1fr)}
label.small{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}

input[type=text], select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit;font-size:14px}
.controls{display:flex;gap:10px;align-items:center}
.btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021028;padding:10px 14px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

.output{display:grid;gap:12px;margin-top:14px}
.card-small{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.03);padding:12px;border-radius:10px}

.value{font-family:var(--mono);font-size:16px;color:#dff6ff}
.label{font-size:12px;color:var(--muted)}
.gr{font-family:var(--mono);font-size:20px;color:var(--accent);font-weight:800}

.muted{color:var(--muted);font-size:13px}
.small{font-size:12px;color:var(--muted)}

.actions{display:flex;gap:8px;margin-top:8px}
.chip{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);font-size:13px}

footer{margin-top:14px;color:var(--muted);font-size:13px}

@media (max-width:880px){.cols-2{grid-template-columns:1fr} .cols-3{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="app">
  <div class="card">
    <header>
      <div class="logo">SL</div>
      <div>
        <h1>Sri Lanka Grid Converter — Tactical</h1>
        <p class="lead">Convert Lat/Lon → Kandawala (EPSG:5235), SLD99 (EPSG:5234), UTM 44N and military Grid Reference (4/6/8‑figure), and reverse GR → Lat/Lon.</p>
      </div>
    </header>

    <div class="grid cols-2">
      <div>
        <!-- Forward Conversion -->
        <div class="grid">
          <div>
            <label class="small">Latitude (DD or DMS)</label>
            <input id="lat" type="text" placeholder="e.g. 8.597475 or 8°35'50.91&quot;N" />
          </div>
          <div>
            <label class="small">Longitude (DD or DMS)</label>
            <input id="lon" type="text" placeholder="e.g. 80.483883 or 80°29'1.98&quot;E" />
          </div>

          <div style="display:flex;gap:10px;align-items:center;margin-top:6px">
            <div style="flex:1">
              <label class="small">Grid Reference Precision</label>
              <div class="row" style="flex-wrap:wrap">
                <label class="chip"><input type="radio" name="precision" value="4"> 4‑figure</label>
                <label class="chip"><input type="radio" name="precision" value="6" checked> 6‑figure</label>
                <label class="chip"><input type="radio" name="precision" value="8"> 8‑figure</label>
              </div>
            </div>

            <div style="min-width:140px">
              <label class="small">Format</label>
              <select id="format">
                <option value="kandawala">Kandawala (EPSG:5235)</option>
                <option value="sld99">SLD99 (EPSG:5234)</option>
                <option value="utm">UTM 44N (EPSG:32644)</option>
              </select>
            </div>
          </div>

          <div class="controls" style="margin-top:8px">
            <button id="convert" class="btn">Convert</button>
            <button id="clear" class="btn ghost">Clear</button>
            <div class="small" style="margin-left:auto">Inputs accept <strong>decimal</strong> or <strong>DMS</strong> formats</div>
          </div>

          <div class="small muted">Examples of DMS: <code>8°35'50.91"N</code> or <code>8 35 50.91 N</code> or <code>8:35:50.91N</code></div>

          <!-- Reverse Conversion -->
          <div class="card-small" style="margin-top:12px;">
            <div class="label">Reverse Grid → Lat/Lon</div>
            <input id="input-gr" type="text" placeholder="Enter 6 or 8‑figure GR" style="margin-top:6px"/>
            <select id="gr-type" style="margin-top:6px">
              <option value="kandawala">Kandawala (EPSG:5235)</option>
              <option value="sld99">SLD99 (EPSG:5234)</option>
            </select>
            <button id="convert-gr" class="btn" style="margin-top:6px">Locate on Map</button>
            <div id="gr-output" class="small muted" style="margin-top:6px">Lat/Lon will appear here</div>
          </div>
        </div>
      </div>

      <aside>
        <div class="card-small">
          <div class="label">Quick actions</div>
          <div class="actions">
            <button id="copy-gr" class="btn ghost" title="Copy last GR">Copy last GR</button>
            <button id="copy-xy" class="btn ghost" title="Copy full E,N">Copy E,N</button>
            <button id="copy-gmap" class="btn ghost" title="Copy Google Maps link">Copy Maps link</button>
          </div>

          <hr style="border:none
